# ğŸ“„ é¡¹ç›® README

## ğŸ“¦ é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®é›†æˆäº†**æ°”å‘³è¯†åˆ«**ã€**è§†è§‰è¯†åˆ«**ã€**æ•°æ®æ”¶é›†**å’Œ**æ‘„å½±åŠŸèƒ½**ï¼Œé€‚ç”¨äº **Rockchip RK3588** è®¾å¤‡ã€‚

---

## âš™ï¸ ä½¿ç”¨æ­¥éª¤

### 1. å‡†å¤‡å·¥ä½œ

#### 1.1 è§£å‹ Edge Impulse é¡¹ç›®æ–‡ä»¶
- ä» [Edge Impulse](https://www.edgeimpulse.com/) ä¸‹è½½ TensorFlow Lite C é¡¹ç›®ã€‚
- è§£å‹åä¼šå¾—åˆ°ä¸‰ä¸ªä¸»è¦æ–‡ä»¶å¤¹ï¼š
  - `model-parameters/`
  - `tflite/`
  - `src/`
- å°†è¿™ä¸‰ä¸ªæ–‡ä»¶å¤¹å¤åˆ¶åˆ°æœ¬é¡¹ç›®çš„æ ¹ç›®å½•ä¸­ã€‚

#### 1.2 è®¾ç½®è„šæœ¬å¯æ‰§è¡Œæƒé™
```bash
sudo chmod +x ./build.sh
sudo chmod +x ./run.sh
```

---

### 2. æ„å»ºç¨‹åº

ä½¿ç”¨ `build.sh` ç¼–è¯‘ç¨‹åºï¼š

```bash
./build.sh all
```

æ”¯æŒå‚æ•°ï¼š
- `smell`ï¼šä»…æ„å»ºæ°”å‘³è¯†åˆ«ç¨‹åº  
- `collect`ï¼šä»…æ„å»ºæ•°æ®æ”¶é›†ç¨‹åº  
- `all`ï¼šåŒæ—¶æ„å»ºæ°”å‘³è¯†åˆ«å’Œæ•°æ®æ”¶é›†ç¨‹åº  

æ„å»ºå®Œæˆåå°†ç”Ÿæˆä¸¤ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼š
- `app`ï¼šæ°”å‘³è¯†åˆ«ä¸»ç¨‹åº  
- `collect_program`ï¼šæ•°æ®æ”¶é›†ç¨‹åº  

---

### 3. è¿è¡Œç¨‹åº

ä½¿ç”¨ `run.sh` å¯åŠ¨ä¸åŒåŠŸèƒ½ï¼š

```bash
./run.sh [command]
```

æ”¯æŒå‘½ä»¤å¦‚ä¸‹ï¼š

| å‘½ä»¤       | åŠŸèƒ½æè¿°             |
|------------|----------------------|
| `collect`  | å¯åŠ¨æ•°æ®æ”¶é›†ç¨‹åº     |
| `smell`    | å¯åŠ¨æ°”å‘³è¯†åˆ«ç¨‹åº     |
| `vision`   | å¯åŠ¨è§†è§‰è¯†åˆ«ç¨‹åº     |
| `shot`     | å¯åŠ¨æ‘„å½±ç¨‹åº         |
| `all`      | åŒæ—¶å¯åŠ¨æ°”å‘³è¯†åˆ«å’Œè§†è§‰è¯†åˆ«ç¨‹åº |

#### ç¤ºä¾‹ï¼š
```bash
./run.sh smell       # å•ç‹¬è¿è¡Œæ°”å‘³è¯†åˆ«
./run.sh vision      # å•ç‹¬è¿è¡Œè§†è§‰è¯†åˆ«
./run.sh all         # åŒæ—¶è¿è¡Œæ°”å‘³è¯†åˆ«å’Œè§†è§‰è¯†åˆ«
```

> æ³¨æ„ï¼šæ‰€æœ‰ç¨‹åºé»˜è®¤åœ¨åå°è¿è¡Œã€‚

---

## ğŸ” æ›¿æ¢æ¨¡å‹ï¼ˆYOLOv11 -> RKNNï¼‰

ä»¥ä¸‹æ­¥éª¤ç”¨äº**æ›¿æ¢è§†è§‰è¯†åˆ«æ¨¡å—ä¸­çš„ YOLO æ¨¡å‹ä¸ºè‡ªå®šä¹‰è®­ç»ƒæ¨¡å‹**ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºé€‚ç”¨äº RK3588 çš„ `.rknn` æ ¼å¼ã€‚

> âš ï¸ æ­¤æ­¥éª¤å¿…é¡»åœ¨ **x64 æ¶æ„çš„ Ubuntu ç³»ç»Ÿ** ä¸Šè¿›è¡Œï¼

### 1. é…ç½® Conda ç¯å¢ƒ
- å°†é¡¹ç›®æ–‡ä»¶å¤¹ `env/` ä¸­çš„ `yolo11.zip` è§£å‹ï¼Œå¹¶å¯¼å…¥ä½ çš„ Conda ç¯å¢ƒä¸­ï¼Œæ­¤å¤„çš„env/è·¯å¾„æ›¿æ¢æˆä½ è‡ªå·±çš„ï¼š
  ```bash
  unzip env/yolo11.zip -d env/
  conda env create -f env/yolo11/environment.yml
  ```
- æ¿€æ´»ç¯å¢ƒï¼š
  ```bash
  conda activate yolo11
  ```

### 2. æ¨¡å‹è½¬æ¢
- å°†ä½ è®­ç»ƒå¥½å¹¶å¯¼å‡ºçš„ YOLOv11 æ¨¡å‹ï¼ˆå¦‚ `best.pt`ï¼‰æ”¾å…¥ `pt2rknn/` æ–‡ä»¶å¤¹ã€‚
- æ‰§è¡Œè½¬æ¢è„šæœ¬ï¼š
  ```bash
  python pt2rknn.py
  ```

å¦‚æœè½¬æ¢æˆåŠŸï¼Œå°†åœ¨å½“å‰ç›®å½•ç”Ÿæˆï¼š
- `best_rknn_model/` æ–‡ä»¶å¤¹
  - åŒ…å« `best.rknn` å’Œ `metadata.yaml`

### 3. æ›¿æ¢æ¨¡å‹
- å°†æ•´ä¸ª `best_rknn_model/` æ–‡ä»¶å¤¹ç§»åŠ¨è‡³é¡¹ç›®æ ¹ç›®å½•ï¼Œæ›¿æ¢åŸæœ‰æ¨¡å‹å³å¯ã€‚

---

## ğŸ§ª ç‰ˆæœ¬è¦æ±‚ï¼ˆé‡è¦ï¼‰

ä¸ºç¡®ä¿ RKNN æ¨¡å‹æ­£å¸¸è¿è¡Œï¼Œè¯·ç¡®è®¤ä»¥ä¸‹å·¥å…·ç‰ˆæœ¬ä¸€è‡´ä¸”å‡ä¸º **2.3.2**ï¼š

| å·¥å…·åç§°             | ç‰ˆæœ¬å·  |
|----------------------|---------|
| `rknpu2`             | 2.3.2   |
| `rknn-toolkit2`      | 2.3.2   |
| `rknn-toolkit2-lite` | 2.3.2   |

å¦‚æœä¸ä¸€è‡´ï¼Œè¯·æ›´æ–°ç›¸å…³åº“æˆ– SDK è‡³ç»Ÿä¸€ç‰ˆæœ¬ã€‚

---

## ğŸ“ ç›®å½•ç»“æ„è¯´æ˜

```
project_root/
â”œâ”€â”€ ADS1X15include/        # Adafruit ADS1X15 åº“æ–‡ä»¶
â”‚   â”œâ”€â”€ Adafruit_ADS1X15.cpp
â”‚   â””â”€â”€ Adafruit_ADS1X15.h
â”œâ”€â”€ env/                   # Conda ç¯å¢ƒé…ç½®
â”‚   â””â”€â”€ yolo11.zip
â”œâ”€â”€ pt2rknn/               # æ¨¡å‹è½¬æ¢è„šæœ¬
â”‚   â””â”€â”€ pt2rknn.py
â”œâ”€â”€ vision/                # è§†è§‰è¯†åˆ«æ¨¡å—
â”‚   â”œâ”€â”€ best_rknn_model/   # è½¬æ¢åçš„ RKNN æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ best.rknn
â”‚   â”‚   â””â”€â”€ metadata.yaml
â”‚   â”œâ”€â”€ run.py             # è§†è§‰è¯†åˆ«ä¸»ç¨‹åº
â”‚   â””â”€â”€ shot.py            # æ‘„å½±ç¨‹åº
â”‚â”€â”€â”€ voices/               # è¯­éŸ³æ–‡ä»¶è¯†åˆ«åˆ°æˆç†Ÿåº¦xxçš„é¦™è•‰
â”‚    â”œâ”€â”€ maturity_1.mp3
â”‚    â”œâ”€â”€ maturity_2.mp3
â”‚    â”œâ”€â”€ maturity_3.mp3
â”‚    â”œâ”€â”€ maturity_4.mp3
â”‚    â””â”€â”€ maturity_5.mp3
â”œâ”€â”€ build.sh               # æ„å»ºè„šæœ¬
â”œâ”€â”€ collect.cpp            # æ•°æ®æ”¶é›†æºä»£ç 
â”œâ”€â”€ gui.py                 # GUI ç•Œé¢è„šæœ¬
â”œâ”€â”€ main.cpp               # ä¸»ç¨‹åºæºä»£ç 
â”œâ”€â”€ Makefile               # Makefile æ–‡ä»¶
â”œâ”€â”€ README.md              # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â””â”€â”€ run.sh                 # è¿è¡Œè„šæœ¬
```
---

å¦‚æœ‰ä»»ä½•ç–‘é—®æˆ–æ”¹è¿›æ„è§ï¼Œæ¬¢è¿æäº¤ Issue æˆ– Pull Requestï¼